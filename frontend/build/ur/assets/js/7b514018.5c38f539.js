"use strict";(globalThis.webpackChunkai_native_textbook=globalThis.webpackChunkai_native_textbook||[]).push([[257],{9339:(e,r,n)=>{n.r(r),n.d(r,{default:()=>s});var o=n(6540),a=n(1483),i=n(6347),l=n(4848);const t="undefined"!=typeof window?"https://naveed247365-ai-textbook-backend.hf.space/api":"http://localhost:8001/api";function s(){const e=(0,i.W6)(),[r,n]=(0,o.useState)(null),[s,c]=(0,o.useState)(!0),[d,m]=(0,o.useState)(!1),[p,f]=(0,o.useState)(""),[h,u]=(0,o.useState)(""),[g,x]=(0,o.useState)({full_name:"",software_background:"",hardware_background:"",experience_level:"Intermediate"});(0,o.useEffect)(()=>{b()},[]);const b=async()=>{const r=localStorage.getItem("user_token");if(r)try{const o=await fetch(`${t}/auth/profile`,{headers:{Authorization:`Bearer ${r}`}});if(o.ok){const e=await o.json();n(e),x({full_name:e.full_name||"",software_background:e.software_background||"",hardware_background:e.hardware_background||"",experience_level:e.experience_level||"Intermediate"})}else 401===o.status?(localStorage.removeItem("user_token"),localStorage.removeItem("user_email"),e.push("/login")):f("Failed to load profile")}catch(o){console.error("Error fetching profile:",o),f("Failed to load profile")}finally{c(!1)}else e.push("/login")},v=e=>{const{name:r,value:n}=e.target;x(e=>({...e,[r]:n}))};return s?(0,l.jsx)(a.A,{title:"Profile",description:"Your profile",children:(0,l.jsx)("div",{className:"profile-container",children:(0,l.jsx)("div",{className:"profile-loading",children:"Loading profile..."})})}):(0,l.jsxs)(a.A,{title:"Profile",description:"Your profile",children:[(0,l.jsx)("style",{children:"\n        .profile-container {\n          min-height: 80vh;\n          padding: 2rem;\n          max-width: 800px;\n          margin: 0 auto;\n        }\n        .profile-loading {\n          text-align: center;\n          padding: 4rem;\n          font-size: 1.2rem;\n          color: var(--ifm-color-emphasis-600);\n        }\n        .profile-header {\n          display: flex;\n          align-items: center;\n          gap: 1.5rem;\n          margin-bottom: 2rem;\n          padding-bottom: 1.5rem;\n          border-bottom: 1px solid var(--ifm-color-emphasis-200);\n        }\n        .profile-picture {\n          width: 100px;\n          height: 100px;\n          border-radius: 50%;\n          object-fit: cover;\n          border: 3px solid var(--ifm-color-primary);\n        }\n        .profile-picture-placeholder {\n          width: 100px;\n          height: 100px;\n          border-radius: 50%;\n          background: var(--ifm-color-emphasis-200);\n          display: flex;\n          align-items: center;\n          justify-content: center;\n          font-size: 3rem;\n          color: var(--ifm-color-emphasis-500);\n        }\n        .profile-info h1 {\n          margin: 0 0 0.5rem;\n          font-size: 1.75rem;\n        }\n        .profile-email {\n          color: var(--ifm-color-emphasis-600);\n          font-size: 1rem;\n        }\n        .profile-oauth-badge {\n          display: inline-flex;\n          align-items: center;\n          gap: 0.35rem;\n          padding: 0.25rem 0.75rem;\n          background: var(--ifm-color-emphasis-100);\n          border-radius: 20px;\n          font-size: 0.8rem;\n          margin-top: 0.5rem;\n          color: var(--ifm-color-emphasis-700);\n        }\n        .profile-form {\n          background: var(--ifm-background-color);\n          border: 1px solid var(--ifm-color-emphasis-200);\n          border-radius: 12px;\n          padding: 2rem;\n        }\n        .profile-form h2 {\n          margin: 0 0 1.5rem;\n          font-size: 1.3rem;\n        }\n        .form-group {\n          margin-bottom: 1.5rem;\n        }\n        .form-label {\n          display: block;\n          margin-bottom: 0.5rem;\n          font-weight: 600;\n          font-size: 0.95rem;\n        }\n        .form-input, .form-select, .form-textarea {\n          width: 100%;\n          padding: 0.75rem;\n          border: 1px solid var(--ifm-color-emphasis-300);\n          border-radius: 8px;\n          font-size: 1rem;\n          background: var(--ifm-background-color);\n          color: var(--ifm-font-color-base);\n          box-sizing: border-box;\n        }\n        .form-input:focus, .form-select:focus, .form-textarea:focus {\n          outline: none;\n          border-color: var(--ifm-color-primary);\n          box-shadow: 0 0 0 3px rgba(0, 212, 170, 0.1);\n        }\n        .form-textarea {\n          min-height: 100px;\n          resize: vertical;\n        }\n        .form-hint {\n          margin-top: 0.35rem;\n          font-size: 0.85rem;\n          color: var(--ifm-color-emphasis-600);\n        }\n        .form-error {\n          padding: 1rem;\n          margin-bottom: 1rem;\n          background: rgba(239, 68, 68, 0.1);\n          border: 1px solid rgba(239, 68, 68, 0.3);\n          border-radius: 8px;\n          color: #ef4444;\n        }\n        .form-success {\n          padding: 1rem;\n          margin-bottom: 1rem;\n          background: rgba(34, 197, 94, 0.1);\n          border: 1px solid rgba(34, 197, 94, 0.3);\n          border-radius: 8px;\n          color: #22c55e;\n        }\n        .form-button {\n          padding: 0.75rem 2rem;\n          background: linear-gradient(135deg, #00d4aa, #00a085);\n          color: white;\n          border: none;\n          border-radius: 8px;\n          font-size: 1rem;\n          font-weight: 600;\n          cursor: pointer;\n          min-height: 48px;\n        }\n        .form-button:disabled {\n          opacity: 0.7;\n          cursor: wait;\n        }\n        .form-button:hover:not(:disabled) {\n          transform: translateY(-1px);\n          box-shadow: 0 4px 12px rgba(0, 212, 170, 0.3);\n        }\n        @media (max-width: 768px) {\n          .profile-container {\n            padding: 1rem;\n          }\n          .profile-header {\n            flex-direction: column;\n            text-align: center;\n          }\n          .profile-form {\n            padding: 1.5rem;\n          }\n        }\n        @media (max-width: 480px) {\n          .profile-picture, .profile-picture-placeholder {\n            width: 80px;\n            height: 80px;\n            font-size: 2.5rem;\n          }\n          .profile-info h1 {\n            font-size: 1.4rem;\n          }\n          .profile-form {\n            padding: 1rem;\n          }\n          .form-button {\n            width: 100%;\n          }\n        }\n      "}),(0,l.jsxs)("div",{className:"profile-container",children:[(0,l.jsxs)("div",{className:"profile-header",children:[r?.profile_picture?(0,l.jsx)("img",{src:r.profile_picture,alt:"Profile",className:"profile-picture"}):(0,l.jsx)("div",{className:"profile-picture-placeholder",children:(r?.full_name||r?.email||"U")[0].toUpperCase()}),(0,l.jsxs)("div",{className:"profile-info",children:[(0,l.jsx)("h1",{children:r?.full_name||"Your Profile"}),(0,l.jsx)("p",{className:"profile-email",children:r?.email}),r?.oauth_provider&&(0,l.jsxs)("div",{className:"profile-oauth-badge",children:["google"===r.oauth_provider&&(0,l.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",children:[(0,l.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,l.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,l.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,l.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"facebook"===r.oauth_provider&&(0,l.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"#1877f2",children:(0,l.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Connected via ",r.oauth_provider.charAt(0).toUpperCase()+r.oauth_provider.slice(1)]})]})]}),(0,l.jsxs)("div",{className:"profile-form",children:[(0,l.jsx)("h2",{children:"Edit Profile"}),p&&(0,l.jsx)("div",{className:"form-error",children:p}),h&&(0,l.jsx)("div",{className:"form-success",children:h}),(0,l.jsxs)("form",{onSubmit:async r=>{r.preventDefault(),m(!0),f(""),u("");const o=localStorage.getItem("user_token");if(o)try{const e=await fetch(`${t}/auth/profile`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(g)}),r=await e.json();e.ok?(n(r),u("Profile updated successfully!"),localStorage.setItem("user_name",r.full_name||""),window.dispatchEvent(new Event("authChange"))):f(r.detail||"Failed to update profile")}catch(a){console.error("Error updating profile:",a),f("Failed to update profile")}finally{m(!1)}else e.push("/login")},children:[(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Full Name"}),(0,l.jsx)("input",{type:"text",name:"full_name",value:g.full_name,onChange:v,placeholder:"Enter your full name",className:"form-input"})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Software Background"}),(0,l.jsx)("textarea",{name:"software_background",value:g.software_background,onChange:v,placeholder:"Describe your programming experience (e.g., Python, JavaScript, React, etc.)",className:"form-textarea"}),(0,l.jsx)("p",{className:"form-hint",children:"This helps personalize content to your coding experience"})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Hardware Background"}),(0,l.jsx)("textarea",{name:"hardware_background",value:g.hardware_background,onChange:v,placeholder:"Describe your hardware experience (e.g., Arduino, Raspberry Pi, sensors, etc.)",className:"form-textarea"}),(0,l.jsx)("p",{className:"form-hint",children:"This helps personalize content to your IoT/hardware experience"})]}),(0,l.jsxs)("div",{className:"form-group",children:[(0,l.jsx)("label",{className:"form-label",children:"Experience Level"}),(0,l.jsxs)("select",{name:"experience_level",value:g.experience_level,onChange:v,className:"form-select",children:[(0,l.jsx)("option",{value:"Beginner",children:"Beginner - New to programming"}),(0,l.jsx)("option",{value:"Intermediate",children:"Intermediate - Some experience"}),(0,l.jsx)("option",{value:"Advanced",children:"Advanced - Experienced developer"}),(0,l.jsx)("option",{value:"Expert",children:"Expert - Professional developer"})]})]}),(0,l.jsx)("button",{type:"submit",disabled:d,className:"form-button",children:d?"Saving...":"Save Changes"})]})]})]})]})}}}]);